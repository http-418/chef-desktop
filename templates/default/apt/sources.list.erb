#
# /etc/apt/sources.list
#
# Generated by <%=ChefUtils::Dist::Infra::PRODUCT%>
# Local changes will be reverted.
#
<%

if node[:platform] == 'debian'
  segments = 'main contrib non-free'
elsif node[:platform] == 'ubuntu' && node['ubuntu']['multiverse_enabled']
  segments = 'main restricted universe multiverse'
elsif node[:platform] == 'ubuntu'
  segments = 'main restricted universe'
else
  raise "Unsupported platform: #{node[:platform]}"
end

-%>
deb <%=node[node[:platform]]['mirror']%> <%=node[:lsb][:codename]%> <%=segments%>
deb <%=node[node[:platform]]['mirror']%> <%=node[:lsb][:codename]%>-updates <%=segments%>
<% if node[:platform] == 'ubuntu' -%>
deb <%=node[node[:platform]]['mirror']%> <%=node[:lsb][:codename]%>-security <%=segments%>
<% end -%>
